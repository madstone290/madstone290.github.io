(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))i(E);new MutationObserver(E=>{for(const s of E)if(s.type==="childList")for(const G of s.addedNodes)G.tagName==="LINK"&&G.rel==="modulepreload"&&i(G)}).observe(document,{childList:!0,subtree:!0});function a(E){const s={};return E.integrity&&(s.integrity=E.integrity),E.referrerPolicy&&(s.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?s.credentials="include":E.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(E){if(E.ep)return;E.ep=!0;const s=a(E);fetch(E.href,s)}})();var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var yt={exports:{}};(function(m,y){(function(a,i){m.exports=i()})(Zt,function(){var a=1e3,i=6e4,E=36e5,s="millisecond",G="second",Z="minute",H="hour",J="day",ce="week",X="month",q="quarter",A="year",j="date",te="Invalid Date",me=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Te=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var h=["th","st","nd","rd"],f=_%100;return"["+_+(h[(f-20)%10]||h[f]||h[0])+"]"}},fe=function(_,h,f){var p=String(_);return!p||p.length>=h?_:""+Array(h+1-p.length).join(f)+_},ve={s:fe,z:function(_){var h=-_.utcOffset(),f=Math.abs(h),p=Math.floor(f/60),v=f%60;return(h<=0?"+":"-")+fe(p,2,"0")+":"+fe(v,2,"0")},m:function _(h,f){if(h.date()<f.date())return-_(f,h);var p=12*(f.year()-h.year())+(f.month()-h.month()),v=h.clone().add(p,X),L=f-v<0,T=h.clone().add(p+(L?-1:1),X);return+(-(p+(f-v)/(L?v-T:T-v))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:X,y:A,w:ce,d:J,D:j,h:H,m:Z,s:G,ms:s,Q:q}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},se="en",ne={};ne[se]=_e;var Le="$isDayjsObject",ge=function(_){return _ instanceof ee||!(!_||!_[Le])},de=function _(h,f,p){var v;if(!h)return se;if(typeof h=="string"){var L=h.toLowerCase();ne[L]&&(v=L),f&&(ne[L]=f,v=L);var T=h.split("-");if(!v&&T.length>1)return _(T[0])}else{var N=h.name;ne[N]=h,v=N}return!p&&v&&(se=v),v||!p&&se},B=function(_,h){if(ge(_))return _.clone();var f=typeof h=="object"?h:{};return f.date=_,f.args=arguments,new ee(f)},w=ve;w.l=de,w.i=ge,w.w=function(_,h){return B(_,{locale:h.$L,utc:h.$u,x:h.$x,$offset:h.$offset})};var ee=function(){function _(f){this.$L=de(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[Le]=!0}var h=_.prototype;return h.parse=function(f){this.$d=function(p){var v=p.date,L=p.utc;if(v===null)return new Date(NaN);if(w.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var T=v.match(me);if(T){var N=T[2]-1||0,D=(T[7]||"0").substring(0,3);return L?new Date(Date.UTC(T[1],N,T[3]||1,T[4]||0,T[5]||0,T[6]||0,D)):new Date(T[1],N,T[3]||1,T[4]||0,T[5]||0,T[6]||0,D)}}return new Date(v)}(f),this.init()},h.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},h.$utils=function(){return w},h.isValid=function(){return this.$d.toString()!==te},h.isSame=function(f,p){var v=B(f);return this.startOf(p)<=v&&v<=this.endOf(p)},h.isAfter=function(f,p){return B(f)<this.startOf(p)},h.isBefore=function(f,p){return this.endOf(p)<B(f)},h.$g=function(f,p,v){return w.u(f)?this[p]:this.set(v,f)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(f,p){var v=this,L=!!w.u(p)||p,T=w.p(f),N=function(o,l){var r=w.w(v.$u?Date.UTC(v.$y,l,o):new Date(v.$y,l,o),v);return L?r:r.endOf(J)},D=function(o,l){return w.w(v.toDate()[o].apply(v.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(l)),v)},P=this.$W,W=this.$M,V=this.$D,re="set"+(this.$u?"UTC":"");switch(T){case A:return L?N(1,0):N(31,11);case X:return L?N(1,W):N(0,W+1);case ce:var ie=this.$locale().weekStart||0,ue=(P<ie?P+7:P)-ie;return N(L?V-ue:V+(6-ue),W);case J:case j:return D(re+"Hours",0);case H:return D(re+"Minutes",1);case Z:return D(re+"Seconds",2);case G:return D(re+"Milliseconds",3);default:return this.clone()}},h.endOf=function(f){return this.startOf(f,!1)},h.$set=function(f,p){var v,L=w.p(f),T="set"+(this.$u?"UTC":""),N=(v={},v[J]=T+"Date",v[j]=T+"Date",v[X]=T+"Month",v[A]=T+"FullYear",v[H]=T+"Hours",v[Z]=T+"Minutes",v[G]=T+"Seconds",v[s]=T+"Milliseconds",v)[L],D=L===J?this.$D+(p-this.$W):p;if(L===X||L===A){var P=this.clone().set(j,1);P.$d[N](D),P.init(),this.$d=P.set(j,Math.min(this.$D,P.daysInMonth())).$d}else N&&this.$d[N](D);return this.init(),this},h.set=function(f,p){return this.clone().$set(f,p)},h.get=function(f){return this[w.p(f)]()},h.add=function(f,p){var v,L=this;f=Number(f);var T=w.p(p),N=function(W){var V=B(L);return w.w(V.date(V.date()+Math.round(W*f)),L)};if(T===X)return this.set(X,this.$M+f);if(T===A)return this.set(A,this.$y+f);if(T===J)return N(1);if(T===ce)return N(7);var D=(v={},v[Z]=i,v[H]=E,v[G]=a,v)[T]||1,P=this.$d.getTime()+f*D;return w.w(P,this)},h.subtract=function(f,p){return this.add(-1*f,p)},h.format=function(f){var p=this,v=this.$locale();if(!this.isValid())return v.invalidDate||te;var L=f||"YYYY-MM-DDTHH:mm:ssZ",T=w.z(this),N=this.$H,D=this.$m,P=this.$M,W=v.weekdays,V=v.months,re=v.meridiem,ie=function(l,r,d,g){return l&&(l[r]||l(p,L))||d[r].slice(0,g)},ue=function(l){return w.s(N%12||12,l,"0")},o=re||function(l,r,d){var g=l<12?"AM":"PM";return d?g.toLowerCase():g};return L.replace(Te,function(l,r){return r||function(d){switch(d){case"YY":return String(p.$y).slice(-2);case"YYYY":return w.s(p.$y,4,"0");case"M":return P+1;case"MM":return w.s(P+1,2,"0");case"MMM":return ie(v.monthsShort,P,V,3);case"MMMM":return ie(V,P);case"D":return p.$D;case"DD":return w.s(p.$D,2,"0");case"d":return String(p.$W);case"dd":return ie(v.weekdaysMin,p.$W,W,2);case"ddd":return ie(v.weekdaysShort,p.$W,W,3);case"dddd":return W[p.$W];case"H":return String(N);case"HH":return w.s(N,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return o(N,D,!0);case"A":return o(N,D,!1);case"m":return String(D);case"mm":return w.s(D,2,"0");case"s":return String(p.$s);case"ss":return w.s(p.$s,2,"0");case"SSS":return w.s(p.$ms,3,"0");case"Z":return T}return null}(l)||T.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(f,p,v){var L,T=this,N=w.p(p),D=B(f),P=(D.utcOffset()-this.utcOffset())*i,W=this-D,V=function(){return w.m(T,D)};switch(N){case A:L=V()/12;break;case X:L=V();break;case q:L=V()/3;break;case ce:L=(W-P)/6048e5;break;case J:L=(W-P)/864e5;break;case H:L=W/E;break;case Z:L=W/i;break;case G:L=W/a;break;default:L=W}return v?L:w.a(L)},h.daysInMonth=function(){return this.endOf(X).$D},h.$locale=function(){return ne[this.$L]},h.locale=function(f,p){if(!f)return this.$L;var v=this.clone(),L=de(f,p,!0);return L&&(v.$L=L),v},h.clone=function(){return w.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},_}(),ae=ee.prototype;return B.prototype=ae,[["$ms",s],["$s",G],["$m",Z],["$H",H],["$W",J],["$M",X],["$y",A],["$D",j]].forEach(function(_){ae[_[1]]=function(h){return this.$g(h,_[0],_[1])}}),B.extend=function(_,h){return _.$i||(_(h,ee,B),_.$i=!0),B},B.locale=de,B.isDayjs=ge,B.unix=function(_){return B(1e3*_)},B.en=ne[se],B.Ls=ne,B.p={},B})})(yt);var Kt=yt.exports;const Ve=jt(Kt),Ke="/PlumChart/assets/close-8d2bdc87.svg",Jt="/PlumChart/assets/black-error-8086e7bd.svg";window.plumChartGlobal={debug:!1};const Je="tc-root",qe="tc-column-title",Qe="tc-column-header-box",et="tc-column-header",tt="tc-side-canvas-box",nt="tc-side-canvas",qt="tc-column-header-item",Qt="tc-column-panel",en="tc-left-panel",tn="tc-main-panel",it="tc-maintitle",ot="tc-table-column-box",st="tc-entity-table-box",nn="tc-entity-table-item",on="tc-main-box",at="tc-main-canvas-box",rt="tc-main-canvas",lt="tc-side-canvas-v-border",sn="tc-side-canvas-point-event",an="tc-main-canvas-h-border",rn="tc-main-canvas-v-border",ln="tc-main-canvas-entity-point-event",cn="tc-main-canvas-entity-range-event",dn="tc-main-canvas-global-range-event",ct="tc-context-menu",un="tc-context-menu-top-left",mn="tc-context-menu-top-right",fn="tc-context-menu-bottom-left",vn="tc-context-menu-bottom-right",Ne="tc-context-menu-closed",ze="tc-context-menu-collapsed",hn="tc-context-menu-group1",Cn="tc-context-menu-group2",pe="tc-context-menu-item",dt="tc-context-menu-item-up",ut="tc-context-menu-item-down",mt="tc-context-menu-item-left",ft="tc-context-menu-item-right",vt="tc-context-menu-item-zoom-in",ht="tc-context-menu-item-zoom-out",Ct="tc-context-menu-item-close",gn="--tc-cell-height",pn="--tc-main-point-content-height",En="--tc-main-range-content-height",Tn="--tc-scroll-width",_n="--tc-height",Ln="--tc-width",xn="--tc-list-width",yn="--tc-column-title-height",Sn="--tc-column-header-height",Mn="--tc-side-canvas-height",wn="--tc-side-canvas-content-height",Rn="--plc-border-color",On="--plc-canvas-line-color",gt=new Map([["topLeft",un],["topRight",mn],["bottomLeft",fn],["bottomRight",vn]]),Nn=function(){const m=`
                    <div class="${Je}">
                        <div class="${en}">
                            <div class="${it}"></div>
                            <div class="${ot}"></div>
                            <div class="${st}"></div>
                        </div>
                        <div class="${tn}">
                            <div class="${Qt}">
                                <div class="${qe}"></div>
                                <div class="${Qe}">
                                    <div class="${et}"></div>
                                </div>
                                <div class="${tt}">
                                    <div class="${nt}"></div>
                                </div>
            
                            </div>
                            <div class="${on}">
                                <div class="${at}">
                                    <div class="${rt}">
                                    </div>
                                </div>
                                <div class="${ct}">
                                    <div class="${hn}">
                                        <div class="${pe} ${dt}"></div>
                                        <div class="${pe} ${ut}"></div>
                                        <div class="${pe} ${mt}"></div>
                                        <div class="${pe} ${ft}"></div>
                                    </div>
                                    <div class="${Cn}">
                                        <div class="${pe} ${vt}"></div>
                                        <div class="${pe} ${ht}"></div>
                                        <div class="${pe} ${Ct}"></div>
                                    </div>
                                </div>
                            <div>
                        </div>
                    </div>
                    `,y={entities:[],sidePointEvents:[],globalRangeEvents:[]},a={chartStartTime:new Date,chartEndTime:new Date(new Date().getDate()+1),controllerLocation:"bottomRight",canvasLineColor:"#ccc",rowHoverColor:"#eee",borderColor:"#ccc",fixedController:!0,buttonScrollStepX:400,buttonScrollStepY:200,mainRangeContentRatio:.8,mainPointContentRatio:.6,sideCanvasContentHeightRatio:.6,maxZoomScale:5,minZoomScale:1,zoomScale:1,zoomChangeRate:.2,scrollLeft:0,scrollTop:0,cellMinutes:30,cellWidth:100,cellHeight:50,leftPanelWidth:200,gridTitle:"",canvasTitle:"",columnTitleHeight:30,columnHeaderHeight:30,sideCanvasHeight:30,paddingCellCount:0,scrollWidth:15,hZoomEnabled:!0,vZoomEnabled:!1,hasHorizontalLine:!0,hasVerticalLine:!0,columnAutoWidth:!0,entityEventSearchScrollOffset:-100,renderMode:"scroll",maxRenderCountPerRow:1e3,useGroupEvent:!1,groupEventWidth:50,renderGroupEvent:(e,t,n)=>(n.innerText="Group",n),customizeElements:e=>{},formatHeaderTime:e=>e.toLocaleTimeString(),renderHeaderCell:(e,t)=>{t.innerText=a.formatHeaderTime(e)},renderGridTitle:(e,t)=>{e.innerText=t},renderGridColumns:e=>{e.innerText="Column"},renderGridRow:(e,t,n)=>{n.innerText="Row #"+e},renderCanvasTitle:(e,t)=>{e.innerText=t},renderSidePointEvent:(e,t,n)=>{n.style.backgroundColor="yellow"},renderEntityPointEvent:(e,t,n)=>{n.style.backgroundColor="red"},renderEntityRangeEvent:(e,t,n)=>{n.style.backgroundColor="green"},renderGlobalRangeEvent:(e,t,n)=>{n.style.backgroundColor="blue"}},i={chartHeight:0,chartWidth:0,cellContentHeight:0,lastZoomTime:new Date,cellWidth:a.cellWidth,cellHeight:a.cellHeight,canvasColumnCount:0,originalCellWidth:0,originalCellHeight:0,chartRenderStartTime:a.chartStartTime,chartRenderEndTime:a.chartEndTime,canvasColumnVLines:[],sideCanvasVLines:[],mainCanvasVLines:[],sidePointEventItems:[],sideGroupEventElements:[],globalRangeEventItems:[],entityContainerRows:new Map,activeEntityRows:new Map},E=document.createElement("div"),s={root:E,gridTitle:E,gridColumnBox:E,canvasTitle:E,gridBox:E,canvasColumnBox:E,canvasColumn:E,sideCanvasBox:E,sideCanvas:E,mainCanvasBox:E,mainCanvas:E,contextMenu:E,upMenuItem:E,downMenuItem:E,leftMenuItem:E,rightMenuItem:E,zoomInMenuItem:E,zoomOutMenuItem:E,closeMenuItem:E};let G,Z;const H=function(){function e(n){return getComputedStyle(s.root).getPropertyValue(n)}function t(n,u){s.root.style.setProperty(n,u)}return{getVariable:e,setVariable:t,setCanvasLineColor:n=>{t(On,n)},setBorderColor:n=>{t(Rn,n)},setLeftPanelWidth:n=>{t(xn,`${n}px`)},setChartWidth:n=>{t(Ln,`${n}px`)},setChartHeight:n=>{t(_n,`${n}px`)},setColumnTitleHeight:n=>{t(yn,`${n}px`)},setColumnHeaderHeight:n=>{t(Sn,`${n}px`)},setSideCanvasHeight:n=>{t(Mn,`${n}px`)},setSideCanvasContentHeight:n=>{t(wn,`${n}px`)},setCellHeight:n=>{t(gn,`${n}px`)},setScrollWidth:n=>{t(Tn,`${n}px`)},setMainRangeContentHeight:n=>{t(En,`${n}px`)},setMainPointContentHeight:n=>{t(pn,`${n}px`)}}}();function J(e){const u=new DOMParser().parseFromString(m,"text/html").body.firstChild;e.appendChild(u),s.root=e.getElementsByClassName(Je)[0],s.gridTitle=e.getElementsByClassName(it)[0],s.gridColumnBox=e.getElementsByClassName(ot)[0],s.canvasTitle=e.getElementsByClassName(qe)[0],s.gridBox=e.getElementsByClassName(st)[0],s.canvasColumnBox=e.getElementsByClassName(Qe)[0],s.canvasColumn=e.getElementsByClassName(et)[0],s.sideCanvasBox=e.getElementsByClassName(tt)[0],s.sideCanvas=e.getElementsByClassName(nt)[0],s.mainCanvasBox=e.getElementsByClassName(at)[0],s.mainCanvas=e.getElementsByClassName(rt)[0],s.contextMenu=e.getElementsByClassName(ct)[0],s.upMenuItem=e.getElementsByClassName(dt)[0],s.downMenuItem=e.getElementsByClassName(ut)[0],s.leftMenuItem=e.getElementsByClassName(mt)[0],s.rightMenuItem=e.getElementsByClassName(ft)[0],s.zoomInMenuItem=e.getElementsByClassName(vt)[0],s.zoomOutMenuItem=e.getElementsByClassName(ht)[0],s.closeMenuItem=e.getElementsByClassName(Ct)[0],se(),ne(),ce(e.clientWidth,e.clientHeight),console.info("PlumChart created.")}function ce(e,t){i.chartWidth=e,i.chartHeight=t,H.setChartWidth(e),H.setChartHeight(t)}function X(e){i.cellHeight=e,H.setCellHeight(e),H.setMainRangeContentHeight(_e()),H.setMainPointContentHeight(fe())}function q(e){return e/(60*1e3)}function A(e){return e*60*1e3}function j(e,t,n){const u=n.getBoundingClientRect(),c=e-u.left,C=t-u.top;return{x:c,y:C}}function te(e,t){return j(e,t,s.mainCanvas)}function me(e,t){return j(e,t,s.mainCanvasBox)}function Te(){const e=s.mainCanvasBox.getBoundingClientRect(),t=e.left+e.width/2,n=e.top+e.height/2;return{clientX:t,clientY:n}}function _e(){return i.cellHeight*a.mainRangeContentRatio}function fe(){return i.cellHeight*a.mainPointContentRatio}function ve(){return a.sideCanvasHeight*a.sideCanvasContentHeightRatio}function se(){s.mainCanvasBox.addEventListener("scroll",e=>{s.canvasColumnBox.scrollLeft=s.mainCanvasBox.scrollLeft,s.sideCanvasBox.scrollLeft=s.mainCanvasBox.scrollLeft,a.scrollLeft=s.mainCanvasBox.scrollLeft,s.gridBox.scrollTop=s.mainCanvasBox.scrollTop,a.scrollTop=s.mainCanvasBox.scrollTop}),s.gridBox.addEventListener("wheel",e=>{s.mainCanvasBox.scrollTop+=e.deltaY}),s.mainCanvas.addEventListener("mousemove",e=>{e.buttons===1&&(s.mainCanvasBox.scrollLeft-=e.movementX,s.mainCanvasBox.scrollTop-=e.movementY)}),s.mainCanvas.addEventListener("mousedown",e=>{document.body.style.cursor="pointer"}),s.mainCanvas.addEventListener("mouseup",e=>{document.body.style.cursor="default"}),s.mainCanvas.addEventListener("wheel",e=>{l(s.mainCanvas,e)}),s.sideCanvas.addEventListener("wheel",e=>{l(s.sideCanvas,e)}),document.body.addEventListener("wheel",e=>{e.ctrlKey&&e.preventDefault()},{passive:!1}),document.body.addEventListener("keydown",e=>{e.ctrlKey&&(document.body.style.cursor="pointer")}),document.body.addEventListener("keyup",e=>{document.body.style.cursor="default"})}function ne(){let e,t;const c=()=>a.buttonScrollStepX,C=()=>a.buttonScrollStepY,M=()=>a.buttonScrollStepX/2,z=()=>a.buttonScrollStepY/2,U=(k,K,oe,he,ye)=>{k.addEventListener("mousedown",function(je){s.mainCanvasBox.scrollTo({top:s.mainCanvasBox.scrollTop+he(),left:s.mainCanvasBox.scrollLeft+K(),behavior:"smooth"}),t=setTimeout(()=>{e=setInterval(()=>{s.mainCanvasBox.scrollTop+=ye(),s.mainCanvasBox.scrollLeft+=oe()},30)},300)}),k.addEventListener("mouseup",je=>{clearInterval(e),clearTimeout(t)}),k.addEventListener("mouseleave",je=>{clearInterval(e),clearTimeout(t)})};U(s.upMenuItem,()=>0,()=>0,()=>-C(),()=>-z()),U(s.downMenuItem,()=>0,()=>0,()=>C(),()=>z()),U(s.leftMenuItem,()=>-c(),()=>-M(),()=>0,()=>0),U(s.rightMenuItem,()=>c(),()=>M(),()=>0,()=>0),s.zoomInMenuItem.addEventListener("click",k=>{if(a.fixedController){const{clientX:K,clientY:oe}=Te(),{x:he,y:ye}=te(K,oe);De(he,ye)}else{const{x:K,y:oe}=te(k.clientX,k.clientY);De(K,oe)}}),s.zoomOutMenuItem.addEventListener("click",k=>{if(a.fixedController){const{clientX:K,clientY:oe}=Te(),{x:he,y:ye}=te(K,oe);Pe(he,ye)}else{const{x:K,y:oe}=te(k.clientX,k.clientY);Pe(K,oe)}}),s.closeMenuItem.addEventListener("click",k=>{a.fixedController?s.contextMenu.classList.toggle(ze):s.contextMenu.classList.toggle(Ne)}),s.mainCanvas.addEventListener("contextmenu",k=>{var he;if((he=window.plumChartGlobal)!=null&&he.debug||k.preventDefault(),a.fixedController)return;const{x:K,y:oe}=me(k.clientX,k.clientY);s.contextMenu.style.left=`${K}px`,s.contextMenu.style.top=`${oe}px`,s.contextMenu.classList.remove(Ne)});let F,Ge=300;s.mainCanvas.addEventListener("touchstart",k=>{F=setTimeout(()=>{},Ge)}),s.mainCanvas.addEventListener("touchend",k=>{F&&clearTimeout(F)}),s.mainCanvas.addEventListener("click",k=>{if(a.fixedController)return;const K=k.target;K==s.zoomInMenuItem||K==s.zoomOutMenuItem||s.contextMenu.classList.add(Ne)})}function Le(e){Object.assign(a,e),de(a.chartStartTime,a.chartEndTime)}function ge(){return{...a}}function de(e,t){a.chartStartTime=e,a.chartEndTime=t,i.chartRenderStartTime=new Date(e.valueOf()-A(a.cellMinutes*a.paddingCellCount)),i.chartRenderEndTime=new Date(t.valueOf()+A(a.cellMinutes*a.paddingCellCount))}function B(e){e.sidePointEvents.sort((t,n)=>t.time.valueOf()-n.time.valueOf()),e.globalRangeEvents.sort((t,n)=>t.startTime.valueOf()-n.startTime.valueOf());for(const t of e.entities)t.pointEvents.sort((n,u)=>n.time.valueOf()-u.time.valueOf()),t.rangeEvents.sort((n,u)=>n.startTime.valueOf()-u.startTime.valueOf());Object.assign(y,e)}function w(){return y}function ee(e,t){return(t==null||i.chartRenderStartTime<=t)&&e<=i.chartRenderEndTime}function ae(e,t){const n=new Date(Math.max(e.getTime(),i.chartRenderStartTime.getTime())),u=t==null?new Date(i.chartRenderEndTime):new Date(Math.min(t.getTime(),i.chartRenderEndTime.getTime()));return[n,u]}function _(){if(gt.forEach(e=>{s.contextMenu.classList.remove(e)}),s.contextMenu.classList.remove(Ne),s.contextMenu.classList.remove(ze),a.fixedController){s.contextMenu.classList.add(ze);const e=gt.get(a.controllerLocation);s.contextMenu.classList.add(e)}}function h(){H.setBorderColor(a.borderColor),H.setCanvasLineColor(a.canvasLineColor),X(a.cellHeight),H.setLeftPanelWidth(a.leftPanelWidth),H.setColumnTitleHeight(a.columnTitleHeight),H.setColumnHeaderHeight(a.columnHeaderHeight),H.setSideCanvasHeight(a.sideCanvasHeight),H.setSideCanvasContentHeight(ve()),H.setScrollWidth(a.scrollWidth)}function f(){i.canvasColumnCount=Math.floor((i.chartRenderEndTime.valueOf()-i.chartRenderStartTime.valueOf())/A(a.cellMinutes)),i.cellWidth=a.cellWidth,i.cellHeight=a.cellHeight,i.originalCellWidth=a.cellWidth,i.originalCellHeight=a.cellHeight,a.columnAutoWidth&&(i.originalCellWidth=s.mainCanvasBox.clientWidth/i.canvasColumnCount,i.cellWidth=i.originalCellWidth*a.zoomScale)}function p(){h(),_(),a.customizeElements({rootElement:s.root}),N(),D(),f(),v(),T(),console.info("PlumChart rendered.")}function v(){P(),W(),re(),r(),x(),Y(),s.mainCanvasBox.scrollTo(s.mainCanvasBox.scrollLeft,s.mainCanvasBox.scrollTop-1),Be(a.zoomScale),Xe(a.scrollLeft,a.scrollTop)}function L(){if(a.columnAutoWidth){const e=s.mainCanvasBox.clientWidth;i.originalCellWidth=e/i.canvasColumnCount,i.cellWidth=i.originalCellWidth*a.zoomScale,Fe()}}function T(){Z==null||Z.disconnect(),Z=new ResizeObserver(L),Z.observe(s.mainCanvasBox)}function N(){s.gridTitle.replaceChildren(),a.renderGridTitle(s.gridTitle,a.gridTitle)}function D(){s.gridColumnBox.replaceChildren(),a.renderGridColumns(s.gridColumnBox)}function P(){let e=Math.max(i.cellWidth*i.canvasColumnCount,s.mainCanvasBox.clientWidth),t=Math.max(i.cellHeight*y.entities.length,s.mainCanvasBox.clientHeight);s.canvasColumn.style.width=`${e+a.scrollWidth}px`,s.sideCanvas.style.width=`${e+a.scrollWidth}px`,s.mainCanvas.style.width=`${e}px`,s.mainCanvas.style.height=`${t}px`}function W(){s.canvasTitle.replaceChildren(),a.renderCanvasTitle(s.canvasTitle,a.canvasTitle)}let V=new Map;function re(){s.canvasColumn.replaceChildren(),V.clear();let e=0,t=i.chartRenderStartTime;for(;e<i.canvasColumnCount;){const n=document.createElement("div");n.classList.add(qt);const u=e==0?0:e*i.cellWidth+1;n.style.left=`${u}px`,n.style.width=`${i.cellWidth}px`,a.renderHeaderCell(t,n),s.canvasColumn.appendChild(n),V.set(e,n),t=new Date(t.getTime()+A(a.cellMinutes)),e++}ie()}function ie(){i.canvasColumnVLines.length=0;let e=0;for(let t=0;t<i.canvasColumnCount;t++){e+=i.cellWidth;const n=document.createElement("div");n.classList.add(lt),n.style.left=`${e}px`,s.canvasColumn.appendChild(n),i.canvasColumnVLines.push(n)}}function ue(){let e=0;for(let t=0;t<i.canvasColumnVLines.length;t++){e+=i.cellWidth;const n=i.canvasColumnVLines[t];n.style.left=`${e}px`}}function o(){for(const[e,t]of V){const n=e==0?0:e*i.cellWidth+1;t.style.left=`${n}px`,t.style.width=`${i.cellWidth}px`}ue()}function l(e,t){var n,u;if(t.ctrlKey){let c={x:0,y:0};if(t.target==e)c.x=t.offsetX,c.y=t.offsetY;else if(t.target.parentElement==e)c.x=t.target.offsetLeft+t.offsetX,c.y=t.target.offsetTop+t.offsetY;else if(((u=(n=t.target)==null?void 0:n.parentElement)==null?void 0:u.parentElement)==e)c.x=t.target.parentElement.offsetLeft+t.offsetX,c.y=t.target.parentElement.offsetTop+t.offsetY;else return;t.deltaY>0?Pe(c.x,c.y):De(c.x,c.y)}}function r(){s.sideCanvas.replaceChildren(),a.hasVerticalLine&&d(),a.useGroupEvent?Ft():O()}function d(){i.sideCanvasVLines.length=0;const e=s.sideCanvas.scrollWidth,t=Math.ceil(e/i.cellWidth);let n=0;for(let u=0;u<t;u++){n+=i.cellWidth;const c=document.createElement("div");c.classList.add(lt),c.style.left=`${n}px`,s.sideCanvas.appendChild(c),i.sideCanvasVLines.push(c)}}function g(){S(),a.useGroupEvent?Xt():b()}function S(){let e=0;for(let t=0;t<i.sideCanvasVLines.length;t++){e+=i.cellWidth;const n=i.sideCanvasVLines[t];n.style.left=`${e}px`}}function O(){let e=y.sidePointEvents;a.maxRenderCountPerRow<y.sidePointEvents.length&&(e=Re(y.sidePointEvents,a.maxRenderCountPerRow),console.warn(`The number of side point events exceeds the maximum limit. [max: ${a.maxRenderCountPerRow}, current: ${y.sidePointEvents.length}]`)),i.sidePointEventItems.length=0;for(const t of e)$(t)}function $(e){const t=e.time;if(!ee(t))return;const n=document.createElement("div"),{top:u,left:c}=I(t);n.style.top=`${u}px`,n.style.left=`${c}px`,n.classList.add(sn),a.renderSidePointEvent(e,s.sideCanvas,n),s.sideCanvas.appendChild(n),i.sidePointEventItems.push({time:t,containerEl:n})}function b(){for(const e of i.sidePointEventItems){const t=e.time,n=e.containerEl,{top:u,left:c}=I(t);n.style.top=`${u}px`,n.style.left=`${c}px`}}function I(e){const[t]=ae(e),u=q(t.valueOf()-i.chartRenderStartTime.valueOf())*i.cellWidth/a.cellMinutes,c=(a.sideCanvasHeight-ve())/2,C=ve();return{left:u-C/2,top:c}}function x(){s.mainCanvas.replaceChildren(),a.hasVerticalLine&&Se(),zt()}function R(){Me(),kt()}function xe(){for(const[e,t]of i.activeEntityRows.entries())$e(t)}function Se(){i.mainCanvasVLines.length=0;const e=s.mainCanvas.scrollWidth,t=i.cellWidth,n=s.mainCanvas.scrollHeight,u=Math.ceil(e/t);let c=0;for(let C=1;C<=u-1;C++){c+=t;const M=document.createElement("div");M.classList.add(rn),M.style.left=`${c}px`,M.style.height=`${n}px`,s.mainCanvas.appendChild(M),i.mainCanvasVLines.push(M)}}function Me(){for(let e=0;e<i.mainCanvasVLines.length;e++){const t=i.mainCanvasVLines[e];t.style.left=`${(e+1)*i.cellWidth}px`}}function Y(){i.entityContainerRows.clear(),i.activeEntityRows.clear(),s.gridBox.replaceChildren(),a.renderMode=="scroll"?Nt():a.renderMode=="intersection"?Rt():bt()}function be(e){const{index:t,entity:n,containerEl:u}=e;if(a.renderGridRow(t,n,u),Dt(n,e),a.hasHorizontalLine){const c=document.createElement("div");c.classList.add(an),c.style.top=`${i.cellHeight*t}px`,s.mainCanvas.appendChild(c),e.hLine=c}e.lastRenderTime=new Date}function $e(e){const{index:t}=e;e.hLine.style.top=`${i.cellHeight*t}px`,Mt(e),e.lastRenderTime=new Date}function Mt(e){At(e),Gt(e)}function wt(e,t){const n=document.createElement("div");return n.classList.add(nn),n.addEventListener("mouseenter",u=>{n.tag=n.style.backgroundColor,n.style.backgroundColor=a.rowHoverColor}),n.addEventListener("mouseleave",u=>{n.style.backgroundColor=n.tag}),n.addEventListener("click",u=>{const C=i.entityContainerRows.get(n).entity,M=$t(C);if(M!=null){const[z]=ae(M),F=q(z.valueOf()-i.chartRenderStartTime.valueOf())*i.cellWidth/a.cellMinutes;s.mainCanvasBox.scrollLeft=F+a.entityEventSearchScrollOffset}}),n.tag=e,n}function Ie(e,t){const n=wt(e,y.entities[e]);s.gridBox.appendChild(n);const u={index:e,containerEl:n,entity:y.entities[e],pointEventContainers:[],rangeEventContainers:[]};return i.entityContainerRows.set(n,u),n}function Rt(){G==null||G.disconnect();const e={root:s.gridBox,threshold:0};G=new IntersectionObserver(Ot,e);const t=y.entities.length;for(let n=0;n<t;n++){const u=Ie(n,y.entities[n]);G.observe(u)}}const Ot=e=>{e.forEach((t,n)=>{var C,M;const u=t.target,c=i.entityContainerRows.get(u);t.isIntersecting?(c.lastRenderTime==null?be(c):c.lastRenderTime<=i.lastZoomTime&&$e(c),i.activeEntityRows.set(c.index,c)):((C=t.rootBounds)==null?void 0:C.width)===0&&((M=t.rootBounds)==null?void 0:M.height)===0||i.activeEntityRows.delete(c.index)})};function Nt(){s.mainCanvasBox.removeEventListener("scroll",He),s.mainCanvasBox.addEventListener("scroll",He);const e=y.entities.length;for(let t=0;t<e;t++)Ie(t,y.entities[t]);He()}function He(){const e=s.mainCanvasBox.scrollTop,t=s.mainCanvasBox.clientHeight,n=e+t;for(const[u,c]of i.entityContainerRows.entries()){const C=c.index*i.cellHeight,M=C+i.cellHeight;C<=n&&e<=M?(c.lastRenderTime==null?be(c):c.lastRenderTime<i.lastZoomTime&&$e(c),i.activeEntityRows.set(c.index,c)):i.activeEntityRows.delete(c.index)}}function bt(){const e=y.entities.length;for(let t=0;t<e;t++){const n=Ie(t,y.entities[t]),u=i.entityContainerRows.get(n);be(u),i.activeEntityRows.set(t,u)}}function $t(e){const t=It(e.rangeEvents);let n=null;0<t.length&&(n=t[0].startTime);const u=Ht(e.pointEvents);let c=null;0<u.length&&(c=u[0].time);let C=null;return n!=null&&c!=null?C=n<c?n:c:n!=null&&c==null?C=n:n==null&&c!=null&&(C=c),C}function It(e){return e==null||e.length==0?[]:e.filter(t=>i.chartRenderStartTime.valueOf()<=t.endTime.valueOf()&&t.startTime.valueOf()<=i.chartRenderEndTime.valueOf()).sort((t,n)=>t.startTime.valueOf()-n.startTime.valueOf())}function Ht(e){return e==null||e.length==0?[]:e.filter(t=>i.chartRenderStartTime.valueOf()<=t.time.valueOf()&&t.time.valueOf()<=i.chartRenderEndTime.valueOf()).sort((t,n)=>t.time.valueOf()-n.time.valueOf())}function Dt(e,t){Pt(e,t),Bt(e,t)}function Pt(e,t){let n=e.pointEvents;a.maxRenderCountPerRow<e.pointEvents.length&&(n=Re(e.pointEvents,a.maxRenderCountPerRow),console.warn(`The number of entity point events exceeds the maximum limit. [max: ${a.maxRenderCountPerRow}, current: ${e.pointEvents.length}]`));for(const u of n)Wt(u,t)}function Bt(e,t){let n=e.rangeEvents;a.maxRenderCountPerRow<e.rangeEvents.length&&(n=Re(e.rangeEvents,a.maxRenderCountPerRow),console.warn(`The number of entity range events exceeds the maximum limit. [max: ${a.maxRenderCountPerRow}, current: ${e.rangeEvents.length}]`));for(const u of n)Vt(u,t)}function At(e){for(const t of e.pointEventContainers){const n=t.time,u=e.index,c=t.containerEl,{top:C,left:M}=Ue(n,u);c.style.top=`${C}px`,c.style.left=`${M}px`}}function Wt(e,t){const n=e.time,u=t.index;if(!ee(n))return;const c=document.createElement("div"),{top:C,left:M}=Ue(n,u);c.style.top=`${C}px`,c.style.left=`${M}px`,c.classList.add(ln),a.renderEntityPointEvent(e,s.mainCanvas,c),s.mainCanvas.appendChild(c),t.pointEventContainers.push({time:n,containerEl:c})}function Ue(e,t){const[n]=ae(e),c=q(n.valueOf()-i.chartRenderStartTime.valueOf())*i.cellWidth/a.cellMinutes,C=fe(),M=i.cellHeight*t+(i.cellHeight-C)/2-1;return{left:c-C/2,top:M}}function Gt(e){for(const t of e.rangeEventContainers){const n=t.startTime,u=t.endTime,c=e.index,{left:C,width:M}=we(n,u,c);t.containerEl.style.left=`${C}px`,t.containerEl.style.width=`${M}px`}}function we(e,t,n){const[u,c]=ae(e,t),C=q(u.valueOf()-i.chartRenderStartTime.valueOf()),M=q(c.valueOf()-u.valueOf()),z=C*i.cellWidth/a.cellMinutes,U=M*i.cellWidth/a.cellMinutes,F=i.cellHeight*n+(i.cellHeight-_e())/2-1;return{left:z,top:F,width:U}}function Vt(e,t){const n=e.startTime,u=e.endTime,c=t.index;if(!ee(n,u))return;const C=document.createElement("div"),{top:M,left:z,width:U}=we(n,u,c);C.style.left=`${z}px`,C.style.top=`${M}px`,C.style.width=`${U}px`,C.classList.add(cn),a.renderEntityRangeEvent(e,s.mainCanvas,C),s.mainCanvas.appendChild(C),t.rangeEventContainers.push({startTime:n,endTime:u,containerEl:C})}function Re(e,t){if(e.length<=t)return e;const n=[],u=e.length/t;for(let c=0;c<e.length;c+=u){const C=Math.floor(c);n.push(e[C])}return n}function zt(){let e=y.globalRangeEvents;a.maxRenderCountPerRow<y.globalRangeEvents.length&&(e=Re(y.globalRangeEvents,a.maxRenderCountPerRow),console.warn(`The number of global range events exceeds the maximum limit. [max: ${a.maxRenderCountPerRow}, current: ${y.globalRangeEvents.length}]`));for(const t of e)Yt(t)}function kt(){for(const e of i.globalRangeEventItems){const t=e.startTime,n=e.endTime,{left:u,width:c}=we(t,n,0);e.containerEl.style.left=`${u}px`,e.containerEl.style.width=`${c}px`}}function Yt(e){const t=e.startTime,n=e.endTime;if(!ee(t,n))return;const{left:u,width:c}=we(t,n,0),C=document.createElement("div");C.style.left=`${u}px`,C.style.width=`${c}px`,C.classList.add(dn),a.renderGlobalRangeEvent(e,s.mainCanvas,C),s.mainCanvas.appendChild(C),i.globalRangeEventItems.push({startTime:t,endTime:n,containerEl:C})}function De(e,t){const n=a.zoomScale*(1+a.zoomChangeRate);Be(n,e,t)}function Pe(e,t){const n=a.zoomScale/(1+a.zoomChangeRate);Be(n,e,t)}function Be(e,t,n){if(e<=a.minZoomScale&&(e=a.minZoomScale),a.maxZoomScale<=e&&(e=a.maxZoomScale),e===a.zoomScale)return;a.zoomScale=e;let u=s.mainCanvasBox.scrollLeft,c=s.mainCanvasBox.scrollTop;if(a.hZoomEnabled){const C=i.originalCellWidth*e,M=i.cellWidth;if(i.cellWidth=C,t){const z=t-u;u=t*C/M-z}}if(a.vZoomEnabled){const C=i.cellHeight,M=i.originalCellHeight*e;if(X(M),n){const z=n-c;c=n*M/C-z}}i.lastZoomTime=new Date,Fe(),Xe(u,c)}function Xe(e,t){s.mainCanvasBox.scrollLeft=e,s.mainCanvasBox.scrollTop=t}function Fe(){P(),o(),g(),R(),xe()}function Ut(){return i.cellWidth/a.cellMinutes}function Ze(){const e=[],t=a.groupEventWidth,n=Ut(),u=t/n;let c=i.chartRenderStartTime;for(;c<=i.chartRenderEndTime;)e.push({startTime:c,endTime:new Date(c.valueOf()+A(u)),events:[]}),c=new Date(c.valueOf()+A(u));for(const C of e){const M=y.sidePointEvents.filter(z=>C.startTime<=z.time&&z.time<C.endTime);C.events=M}return e}function Xt(){Ae=Ze(),Oe()}function Oe(){const e=s.mainCanvasBox.scrollLeft,t=e+s.mainCanvasBox.clientWidth,n=Math.ceil(s.mainCanvas.scrollWidth/a.groupEventWidth);for(let u=0;u<n;u++){const c=Ae[u],C=u*a.groupEventWidth,M=C+a.groupEventWidth;if(e<M&&C<t){if(We.has(u)){const Ge=We.get(u);a.renderGroupEvent(c,s.sideCanvas,Ge);continue}const U={width:a.groupEventWidth,height:30,x:C,y:5},F=document.createElement("div");F.style.width=`${U.width}px`,F.style.height=`${U.height}px`,F.style.position="absolute",F.style.left=`${U.x}px`,F.style.top=`${U.y}px`,a.renderGroupEvent(c,s.sideCanvas,F),s.sideCanvas.appendChild(F),We.set(u,F)}}}let Ae=[];const We=new Map;function Ft(){Ae=Ze(),s.mainCanvasBox.removeEventListener("scroll",Oe),s.mainCanvasBox.addEventListener("scroll",Oe),Oe()}return{create:J,setOptions:Le,getOptions:ge,setData:B,getData:w,setChartTimeRange:de,render:p,renderCanvas:v}};var Q=(m=>(m.ASC="asc",m.DESC="desc",m.NONE="none",m))(Q||{});const bn="pl-root-container",$n="pl-legend-container",In="pl-chart-container",Hn="pl-legends",pt="pl-legends-left",Et="pl-legends-right",Dn="pl-legend",Pn="pl-legend-icon",Bn="pl-legend-label",An="pl-grid-title",Wn="pl-grid-columns",Gn="pl-grid-column",Vn="pl-grid-column-caption",zn="pl-grid-column-icon",kn="pl-grid-row",Yn="pl-grid-cell",ke="pl-tooltip",Tt="pl-tooltip-close",_t="pl-tooltip-title",Lt="pl-tooltip-visible",xt="pl-tooltip-invisible",Un="pl-canvas-title",Xn="pl-canvas-column",Ye="pl-entity-point-event",Fn="pl-entity-range-event",Zn="pl-global-range-event";function ai(){const m={coreOptions:{renderMode:"scroll",gridTitle:"",canvasTitle:"",chartStartTime:new Date,chartEndTime:new Date,leftPanelWidth:350,columnTitleHeight:50,columnHeaderHeight:50,sideCanvasHeight:50,sideCanvasContentHeightRatio:.8,cellMinutes:20,cellWidth:100,cellHeight:50,mainRangeContentRatio:.9,mainPointContentRatio:.8,minZoomScale:1,maxZoomScale:10,zoomScale:1,hasHorizontalLine:!0,hasVerticalLine:!0,columnAutoWidth:!0,rowHoverColor:"#ddd",borderColor:"#333c77",canvasLineColor:"#e1edf8",fixedController:!0,controllerLocation:"bottomRight",renderGridRow:_,renderHeaderCell:Z,renderGridTitle:de,renderGridColumns:B,renderCanvasTitle:h,customizeElements:f,renderSidePointEvent:Le,renderGlobalRangeEvent:ge,renderEntityPointEvent:se,renderEntityRangeEvent:ne,useGroupEvent:!1,groupEventWidth:50,renderGroupEvent:N},useGroupEvent:!1,useEventHoverColor:!0,eventHoverColor:"#ccc",gridColumns:[],formatTime:o=>Ve(o).format("YYYY-MM-DD HH:mm:ss"),formatTimeRange:G,renderCanvasColumn:Z,renderPointEventTooltip:Te,renderRangeEventTooltip:fe,renderEventTooltip:(o,l,r)=>{L(o,l,r)},getEventColor:o=>"",hasTooltipLazyLoading:o=>!1,hasTooltipShowTime:o=>!0,getEventIconSrc:o=>"",getEventClassName:o=>"",getTooltipTitle:o=>"",getTooltipTextLines:o=>[],getTooltipLazyTextLines:o=>Promise.resolve([]),hasTooltipVisible:o=>!0},y={legends:[],entities:[],sidePointEvents:[],globalRangeEvents:[]},a=document.createElement("div"),i={entitiesBackup:[],gridColumnMap:new Map,gridColumnIconMap:new Map,gridColumnSortFuncs:[],sortDirection:Q.NONE,sortColumnField:"",containerEl:a,legendsEl:a,fixedTooltips:new Set,elementCustomized:!1},E=Nn();function s(o){i.containerEl=o,i.legendsEl=p();const l=document.createElement("div");l.classList.add(bn);const r=document.createElement("div");r.classList.add($n),r.appendChild(i.legendsEl),l.appendChild(r);const d=document.createElement("div");d.classList.add(In),E.create(d),E.setOptions(m.coreOptions),l.appendChild(d),i.containerEl.appendChild(l)}function G(o,l){const d=(l.getTime()-o.getTime())/1e3,g=d/60,S=g/60,O=S/24,$=O/30,b=$/12,I=Math.floor(d%60),x=Math.floor(g%60),R=Math.floor(S%24),xe=Math.floor(O%30),Se=Math.floor($%12),Me=Math.floor(b);let Y="";return Me>0&&(Y=Y+Me+"년"),Se>0&&(Y=Y+Se+"개월"),xe>0&&(Y=Y+xe+"일"),R>0&&(Y=Y+R+"시간"),x>0&&(Y=Y+x+"분"),I>0&&(Y=Y+I+"초"),Y===""&&(Y="0초"),Y}function Z(o,l){const r=document.createElement("div");return r.classList.add(Xn),r.innerText=Ve(o).format("HH:mm"),l.appendChild(r),r}function H(o){const l=o.style.backgroundColor;o.addEventListener("mouseenter",r=>{o.style.backgroundColor=m.eventHoverColor}),o.addEventListener("mouseleave",r=>{o.style.backgroundColor=l})}function J(o){o.classList.add(Lt),o.classList.remove(xt)}function ce(o){o.classList.add(xt),o.classList.remove(Lt)}function X(o){J(o),i.fixedTooltips.add(o)}function q(o){ce(o),i.fixedTooltips.delete(o)}function A(o,l){const r=l??o.tag;if(!r)return;o.tag=l;const d=10,S=o.getBoundingClientRect().height,O=window.innerHeight-d*2;S>=O?o.style.maxHeight=O+"px":o.style.maxHeight="";let $=r.clientX,b=r.clientY,I=$+d,x=b+d;$+d+o.offsetWidth>window.innerWidth&&(I=Math.max(d,$-o.offsetWidth-d)),window.innerHeight<b+o.offsetHeight+d&&(x=Math.max(d,window.innerHeight-o.offsetHeight-d)),o.style.top=x+"px",o.style.left=I+"px"}function j(o){return i.fixedTooltips.has(o)}function te(o,l,r="dblclick"){o.addEventListener("mousemove",d=>{d.target===o&&(j(l)||A(l,d))}),o.addEventListener("mouseleave",d=>{j(l)||ce(l)}),o.addEventListener("mouseenter",d=>{j(l)||(J(l),A(l,d))}),o.addEventListener(r,d=>{d.stopPropagation(),j(l)?q(l):X(l)}),o.addEventListener("click",d=>{d.stopPropagation()}),l.addEventListener("click",d=>{d.stopPropagation()}),l.addEventListener("mousemove",d=>{d.stopPropagation()})}function me(o,l){const r=document.createElement("div");return r.innerText=o,l.appendChild(r),r}function Te(o,l,r){const d=document.createElement("img");d.classList.add(Tt),d.src=Ke,d.addEventListener("click",I=>{q(r)}),r.appendChild(d);const g=document.createElement("div");g.classList.add(_t);const S=m.getTooltipTitle(o);if(g.innerText=S,r.appendChild(g),m.hasTooltipShowTime(o)){const I=document.createElement("div");I.innerText=m.formatTime(o.time),r.appendChild(I)}const $=m.getTooltipTextLines(o);for(const I of $)me(I,r);if(m.hasTooltipLazyLoading(o)){let I=!1;l.addEventListener("mouseenter",async x=>{if(I)return;I=!0;const R=await m.getTooltipLazyTextLines(o);for(const xe of R)me(xe,r);A(r)})}}async function _e(o,l,r,d){const g=document.createElement("img");g.classList.add(d.img),g.src=m.getEventIconSrc(o);const S=m.getEventClassName(o);if(S&&g.classList.add(S),r.appendChild(g),m.hasTooltipVisible(o)){const $=document.createElement("div");$.classList.add(ke),l.appendChild($),m.renderPointEventTooltip(o,g,$),te(g,$)}m.useEventHoverColor&&H(g)}function fe(o,l,r){const d=document.createElement("img");d.classList.add(Tt),d.src=Ke,d.addEventListener("click",b=>{q(r)}),r.appendChild(d);const g=document.createElement("div");if(g.classList.add(_t),g.innerText=m.getTooltipTitle(o),r.appendChild(g),m.hasTooltipShowTime(o)){const b=m.formatTime(o.startTime),I=m.formatTime(o.endTime),x=m.formatTimeRange(o.startTime,o.endTime),R=document.createElement("div");R.innerText=`${b} ~ ${I} (${x})`,r.appendChild(R)}const O=m.getTooltipTextLines(o);for(const b of O)me(b,r);if(m.hasTooltipLazyLoading(o)){let b=!1;l.addEventListener("mouseenter",async I=>{if(b)return;b=!0;const x=await m.getTooltipLazyTextLines(o);for(const R of x)me(R,r);A(r)})}}async function ve(o,l,r,d){const g=document.createElement("div");g.classList.add(d.box);const S=m.getEventClassName(o);S&&g.classList.add(S);const O=m.getEventColor(o);if(O&&(g.style.backgroundColor=O),r.appendChild(g),m.hasTooltipVisible(o)){const b=document.createElement("div");b.classList.add(ke),l.appendChild(b),m.renderRangeEventTooltip(o,g,b),te(g,b)}m.useEventHoverColor&&H(g)}async function se(o,l,r){_e(o,l,r,{img:Ye})}async function ne(o,l,r){ve(o,l,r,{box:Fn})}function Le(o,l,r){se(o,l,r)}async function ge(o,l,r){ve(o,l,r,{box:Zn})}function de(o,l){const r=document.createElement("div");r.classList.add(An),r.innerText=l,o.appendChild(r)}function B(o){const l=document.createElement("div");l.classList.add(Wn),o.appendChild(l);let r=0;for(const d of i.gridColumnMap.keys()){const[g,S]=w(l,r++,d.caption);l.appendChild(g),i.gridColumnMap.set(d,g),i.gridColumnIconMap.set(d,S)}for(const[d,g]of i.gridColumnMap.entries())g.addEventListener("click",S=>{const O=d.field;i.sortColumnField!=O?i.sortDirection=Q.ASC:i.sortDirection==Q.ASC?i.sortDirection=Q.DESC:i.sortDirection==Q.DESC?i.sortDirection=Q.NONE:i.sortDirection=Q.ASC,i.sortColumnField=O;for(const I of i.gridColumnIconMap.values())ee(I,Q.NONE);const $=i.gridColumnIconMap.get(d);ee($,i.sortDirection),ae(O,i.sortDirection);const b=new CustomEvent("sort",{detail:{field:O,direction:i.sortDirection}});window.dispatchEvent(b)})}function w(o,l,r){const d=document.createElement("div");d.classList.add(Gn),d.setAttribute("data-index",l.toString());const g=document.createElement("div");g.classList.add(Vn),g.innerText=r,d.appendChild(g);const S=document.createElement("div");return S.classList.add(zn),d.appendChild(S),o.appendChild(d),[d,S]}function ee(o,l){l==Q.ASC?o.innerHTML="&#9650;":l==Q.DESC?o.innerHTML="&#9660;":o.innerHTML=""}function ae(o,l){let r=[...i.entitiesBackup];if(l==Q.NONE){E.setData({entities:r,sidePointEvents:y.sidePointEvents,globalRangeEvents:y.globalRangeEvents}),E.renderCanvas();return}const d=i.gridColumnSortFuncs.find(g=>g.field==o);d&&(r=y.entities.sort(d.compareFn)),E.setData({entities:r,sidePointEvents:y.sidePointEvents,globalRangeEvents:y.globalRangeEvents}),E.setData({entities:r,sidePointEvents:y.sidePointEvents,globalRangeEvents:y.globalRangeEvents}),E.renderCanvas()}function _(o,l,r){r.classList.add(kn),l.gridRowClassName&&r.classList.add(l.gridRowClassName);let d=0;for(const g of i.gridColumnMap.keys()){const S=document.createElement("div");S.setAttribute("data-index",(d++).toString()),S.classList.add(Yn),S.innerText=l[g.field].toString()??"",r.appendChild(S)}}function h(o,l){const r=document.createElement("div");r.classList.add(Un),r.innerText=l,o.appendChild(r)}function f(o){i.elementCustomized||(i.elementCustomized=!0,o.rootElement.addEventListener("click",l=>{for(const r of i.fixedTooltips.values())q(r)}))}function p(){const o=document.createElement("div");o.classList.add(Hn);const l=document.createElement("div");l.classList.add(pt);const r=document.createElement("div");return r.classList.add(Et),o.appendChild(l),o.appendChild(r),o}function v(){if(!y.legends)return;const o=i.legendsEl.getElementsByClassName(pt)[0],l=i.legendsEl.getElementsByClassName(Et)[0];o.replaceChildren(),l.replaceChildren();for(const r of y.legends){const d=document.createElement("div");d.classList.add(Dn),r.location=="left"||r.location==null?o.appendChild(d):l.appendChild(d);const g=document.createElement("div");g.classList.add(Pn),r.icon&&(g.style.backgroundImage=`url(${r.icon})`,g.style.backgroundSize="contain"),r.color&&(g.style.backgroundColor=r.color),r.className&&g.classList.add(r.className);const S=document.createElement("div");S.classList.add(Bn),S.innerText=r.label,d.appendChild(g),d.appendChild(S)}}function L(o,l,r){let d=1;for(const g of o.events){const S=document.createElement("div");S.style.whiteSpace="pre";const $=`[${g.type}]`.padEnd(12," "),b=Ve(g.time).format("YYYY-MM-DD HH:mm:ss");S.innerText=`${d}. ${$} ${b}`,r.appendChild(S),d++}}const T=new Map;function N(o,l,r){if(!(0<o.events.length)){let x=r.children[0];const R=T.get(x);return R&&R.remove(),r.replaceChildren(),r}let g=r.children[0];const S=T.get(g);S&&S.remove(),r.replaceChildren();const O=document.createElement("div");O.style.position="relative",O.style.width="100%",O.style.height="100%";const $=o.events.reduce((x,R)=>(x.push(R.type),x),[]),b=1<$.length?Jt:m.getEventIconSrc(o.events[0]);if(1<$.length){const x=document.createElement("img");x.style.position="absolute",x.src=b,x.style.width="30px",x.style.height="30px",x.classList.add(Ye),O.appendChild(x);const R=document.createElement("div");R.style.position="absolute",R.style.left="50%",R.style.top="50%",R.style.color="white",R.innerText=o.events.length.toString(),O.appendChild(R),r.appendChild(O),m.useEventHoverColor&&H(x)}else{const x=document.createElement("img");x.src=b,x.style.width="30px",x.style.height="30px",x.classList.add(Ye),O.appendChild(x),r.appendChild(O),m.useEventHoverColor&&H(x)}if(m.hasTooltipVisible(o)){let x=r.children[0];if(T.has(x)){const R=T.get(x);R.replaceChildren(),m.renderEventTooltip(o,x,R)}else{const R=document.createElement("div");R.classList.add(ke),m.renderEventTooltip(o,x,R),l.appendChild(R),te(x,R),T.set(x,R)}}return r}function D(o){var l,r;Object.assign(m,o),o.coreOptions&&(o.useGroupEvent&&(o.coreOptions.useGroupEvent=o.useGroupEvent),E.setOptions(o.coreOptions)),i.gridColumnMap.clear(),(l=m.gridColumns)==null||l.forEach(d=>{i.gridColumnMap.set(d,a)}),i.gridColumnSortFuncs=((r=m.gridColumns)==null?void 0:r.map(d=>({field:d.field,compareFn:(g,S)=>{var I,x;const O=(I=g[d.field])==null?void 0:I.toString(),$=(x=S[d.field])==null?void 0:x.toString();return(i.sortDirection==Q.ASC?1:-1)*O.localeCompare($)}})))??[]}function P(){const o=E.getOptions(),l={...m};return Object.assign(l,o),l}function W(o){Object.assign(y,o),i.entitiesBackup=y.entities.map(l=>({...l,pointEvents:[...l.pointEvents],rangeEvents:[...l.rangeEvents]})),E.setData({entities:y.entities,sidePointEvents:y.sidePointEvents,globalRangeEvents:y.globalRangeEvents})}function V(){return y}function re(){i.elementCustomized=!1,v(),E.render()}function ie(){ae(i.sortColumnField,i.sortDirection)}function ue(){return E}return{create:s,setOptions:D,getOptions:P,setData:W,getData:V,render:re,renderCanvas:ie,getCoreChart:ue}}const jn="/PlumChart/assets/error-73acc930.svg",Kn="/PlumChart/assets/warning-04038b37.svg";var St=(m=>(m.Quality="quality",m.Safety="safety",m))(St||{}),Ee=(m=>(m.Op1="op1",m.Op2="op2",m.Op3="op3",m.Op4="op4",m.NetworkError="networkError",m))(Ee||{}),Ce=(m=>(m.Man="man",m.Delivery="delivery",m.Cost="cost",m))(Ce||{}),le=(m=>(m.Downtime="downtime",m.Network="network",m))(le||{});const Jn=Object.values(St),qn=Object.values(Ee),Qn=Object.values(Ce),ei=Object.values(le),ti=new Map([[Ee.Op1,"pl-op1"],[Ee.Op2,"pl-op2"],[Ee.Op3,"pl-op3"],[Ee.Op4,"pl-op4"],[Ee.NetworkError,"pl-network"]]),ni=qn.map(m=>({label:m,className:ti.get(m)})),ii=Jn.map(m=>({label:m,icon:Kn})),oi=Qn.map(m=>({label:m,icon:jn,location:"right"})),si=ei.map(m=>({label:m,className:m===le.Downtime?"pl-downtime":"pl-network",location:"right"})),ri=[...ni,...ii,...oi,...si];new Date(2024,0,1,2,0,0,0),Ce.Cost,new Date(2024,0,1,2,10,0,0),Ce.Delivery,new Date(2024,0,1,2,20,0,0),Ce.Man,new Date(2024,0,1,3,0,0,0),Ce.Cost,new Date(2024,0,1,3,10,0,0),Ce.Delivery,new Date(2024,0,1,3,20,0,0),Ce.Man;const li=[{startTime:new Date(2024,0,1,1,10,0,0),endTime:new Date(2024,0,1,2,30,0,0),type:le.Downtime},{startTime:new Date(2024,0,1,2,50,0,0),endTime:new Date(2024,0,1,3,20,0,0),type:le.Network},{startTime:new Date(2024,0,1,3,40,0,0),endTime:new Date(2024,0,1,4,0,0,0),type:le.Network},{startTime:new Date(2024,0,1,6,10,0,0),endTime:new Date(2024,0,1,6,30,0,0),type:le.Downtime},{startTime:new Date(2024,0,1,7,0,0,0),endTime:new Date(2024,0,1,8,20,0,0),type:le.Network},{startTime:new Date(2024,0,1,10,0,0,0),endTime:new Date(2024,0,1,12,0,0,0),type:le.Downtime},{startTime:new Date(2024,0,1,14,0,0,0),endTime:new Date(2024,0,1,16,20,0,0),type:le.Network}];export{jn as E,le as G,Ee as L,ai as P,Ce as S,Kn as W,Jn as a,ri as b,St as c,ti as d,li as g,qn as l,Qn as s};
